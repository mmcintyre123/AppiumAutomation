<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for appium-base-driver/lib/driver.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">appium-base-driver/lib/driver.js</span></h1>
    <h2>
        Statements: <span class="metric">74.49% <small>(146 / 196)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">54.55% <small>(48 / 88)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">95.65% <small>(22 / 23)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">86.73% <small>(98 / 113)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">appium-base-driver/lib/</a> &#187; driver.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">170</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">227</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">56</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">57</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
&nbsp;
Object.defineProperty(exports, '__esModule', {
  value: true
});
// istanbul ignore next
&nbsp;
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i &lt; props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { <span class="missing-if-branch" title="else path not taken" >E</span>if (protoProps) defineProperties(Constructor.prototype, protoProps);<span class="missing-if-branch" title="if path not taken" >I</span> if (staticProps) <span class="cstat-no" title="statement not covered" >defineProperties(Constructor, staticProps); </span>return Constructor; }; })();
&nbsp;
// istanbul ignore next
&nbsp;
var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property);<span class="missing-if-branch" title="if path not taken" >I</span> if (desc === undefined) { <span class="cstat-no" title="statement not covered" >var parent = Object.getPrototypeOf(object);<span class="cstat-no" title="statement not covered" > </span>if (parent === null) { <span class="cstat-no" title="statement not covered" >return undefined; </span>} else { <span class="cstat-no" title="statement not covered" >_x2 = parent;<span class="cstat-no" title="statement not covered" > </span>_x3 = property;<span class="cstat-no" title="statement not covered" > </span>_x4 = receiver;<span class="cstat-no" title="statement not covered" > </span>_again = true;<span class="cstat-no" title="statement not covered" > </span>continue _function; </span>} </span>} else <span class="missing-if-branch" title="else path not taken" >E</span>if ('value' in desc) { return desc.value; } else { <span class="cstat-no" title="statement not covered" >var getter = desc.get;<span class="cstat-no" title="statement not covered" > </span>if (getter === undefined) { <span class="cstat-no" title="statement not covered" >return undefined; </span>}<span class="cstat-no" title="statement not covered" > </span>return getter.call(receiver); </span>} } };
&nbsp;
// istanbul ignore next
&nbsp;
function _interopRequireDefault(obj) { r<span class="branch-1 cbranch-no" title="branch not covered" >e</span>turn obj &amp;&amp; obj.__esModule ? <span class="branch-0 cbranch-no" title="branch not covered" >obj </span>: { 'default': obj }; }
&nbsp;
// istanbul ignore next
&nbsp;
function _slicedToArray(arr, i) { <span class="missing-if-branch" title="else path not taken" >E</span>if (Array.isArray(arr)) { return arr; } else <span class="cstat-no" title="statement not covered" >if (Symbol.iterator in Object(arr)) { <span class="cstat-no" title="statement not covered" >var _arr = [];<span class="cstat-no" title="statement not covered" > </span>var _n = true;<span class="cstat-no" title="statement not covered" > </span>var _d = false;<span class="cstat-no" title="statement not covered" > </span>var _e = undefined;<span class="cstat-no" title="statement not covered" > </span>try { <span class="cstat-no" title="statement not covered" >for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { <span class="cstat-no" title="statement not covered" >_arr.push(_s.value);<span class="cstat-no" title="statement not covered" > </span>if (i &amp;&amp; _arr.length === i) <span class="cstat-no" title="statement not covered" >break; </span></span>} </span>} catch (err) { <span class="cstat-no" title="statement not covered" >_d = true;<span class="cstat-no" title="statement not covered" > </span>_e = err; </span>} finally { <span class="cstat-no" title="statement not covered" >try { <span class="cstat-no" title="statement not covered" >if (!_n &amp;&amp; _i['return']) <span class="cstat-no" title="statement not covered" >_i['return'](); </span></span>} finally { <span class="cstat-no" title="statement not covered" >if (_d) <span class="cstat-no" title="statement not covered" >throw _e; </span></span>} </span>}<span class="cstat-no" title="statement not covered" > </span>return _arr; </span>} else { <span class="cstat-no" title="statement not covered" >throw new TypeError('Invalid attempt to destructure non-iterable instance'); </span>} </span>}
&nbsp;
// istanbul ignore next
&nbsp;
function _classCallCheck(instance, Constructor) { <span class="missing-if-branch" title="if path not taken" >I</span>if (!(instance instanceof Constructor)) { <span class="cstat-no" title="statement not covered" >throw new TypeError('Cannot call a class as a function'); </span>} }
&nbsp;
// istanbul ignore next
&nbsp;
function _inherits(subClass, superClass) { <span class="missing-if-branch" title="if path not taken" >I</span>if (typeof superClass !== 'function' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >superClass !== null)</span> { <span class="cstat-no" title="statement not covered" >throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); </span>} subClass.prototype = Object.create(superClass &amp;&amp; superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });<span class="missing-if-branch" title="else path not taken" >E</span> if (superClass) subClass.__proto__ = superClass; }
&nbsp;
var _mobileJsonWireProtocol = require('mobile-json-wire-protocol');
&nbsp;
var _commands = require('./commands');
&nbsp;
var _commands2 = _interopReq<span class="fstat-no" title="function not covered" >uire</span>Default(_commands);
<span class="cstat-no" title="statement not covered" ></span>
var _logger = require('./logger');
&nbsp;
var _logger2 = _interopRequireDefault(_logger);
&nbsp;
var _desiredCaps = require('./desired-caps');
<span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span></span>
var _bluebird = require('bluebird');
&nbsp;
var _bluebird2 = _interopRequireDefault(_bluebird);
&nbsp;
var _lodash = require('lodash');
&nbsp;
var _lodash2 = _interopRequireDefault(_lodash);
&nbsp;
_desiredCaps.validator.promise = _bluebird2['default'];
_desiredCaps.validator.prettify = function (val) {
  return val;
};
&nbsp;
var <span class="missing-if-branch" title="if path not taken" >I</span>NEW_COMMAND_TIMEOUT_MS = 60 * 1000;
<span class="cstat-no" title="statement not covered" ></span>
var BaseDriver = (function (_MobileJsonWireProtocol) {
  function BaseDriver() {
    var shouldValidateCaps = arguments[0] === undefined ? true : arguments[0];
&nbsp;
    _classCallCheck(this, BaseDriver);
&nbsp;
    _get(Object.getPrototypeOf(BaseDriver.prototype), 'constructor', this).call(this);
    this.sessionId = null;
    this.caps = null;
    this.newCommandTimeoutMs = NEW_COMMAND_TIMEOUT_MS;
    this._constraints = _lodash2['default'].cloneDeep(_desiredCaps.desiredCapabilityConstraints);
&nbsp;
    // base-driver internals
    this.curCommand = new _bluebird2['default'](function (r) {
      r();
    }); // see note in execute
    this.noCommandTimer = null;
    this.shouldValidateCaps = shouldValidateCaps;
  }
&nbsp;
  _inherits(BaseDriver, _MobileJsonWireProtocol);
&nbsp;
  _createClass(BaseDriver, [{
    key: 'sessionExists',
&nbsp;
    // method required by MJSONWP in order to determine whether it should
    // respond with an invalid session response
    value: function sessionExists(sessionId) {
      if (!sessionId) return false;
      return sessionId === this.sessionId;
    }
  }, {
    key: 'logExtraCaps',
    value: function logExtraCaps(caps) {
      var extraCaps = _lodash2['default'].difference(_lodash2['default'].keys(caps), _lodash2['default'].keys(this._constraints));
      if (extraCaps.length) {
        _logger2['default'].warn('The following capabilities were provided, but are not ' + ('recognized by appium: ' + extraCaps.join(', ') + '.'));
      }
    }
  }, {
    key: 'validateDesiredCaps',
    value: function validateDesiredCaps(caps) {
      if (!this.shouldValidateCaps) {
        return true;
      }
&nbsp;
      var validationOptions = { fullMessages: false };
&nbsp;
      var validationErrors = _desiredCaps.validator.validate(caps, this._constraints, validationOptions);
&nbsp;
      if (validationErrors) {
        var message = 'The desiredCapabilities object was not valid for the ' + 'following reason(s):';
&nbsp;
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;
&nbsp;
        try {
          for (var _iterator = _lodash2['default'].pairs(validationErrors)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var _step$value = _slicedToArray(_step.value, 2);
&nbsp;
            var attribute = _step$value[0];
            var reasons = _step$value[1];
            var _iteratorNormalCompletion2 = true;
            var _didIteratorError2 = false;
            var _iteratorError2 = undefined;
&nbsp;
            try {
              for (var _iterator2 = reasons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                var reason = _step2.value;
&nbsp;
                message += ' ' + attribute + ' ' + reason + ',';
              }
            } <span class="branch-3 cbranch-no" title="branch not covered" >catch (err) {</span>
<span class="cstat-no" title="statement not covered" >              _didIteratorError2 = true;</span>
<span class="cstat-no" title="statement not covered" >              _iteratorError2 = err;</span>
            } finally {
              try {
                <span class="missing-if-branch" title="if path not taken" >I</span>if (!_iteratorNormalCompletion2 &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >_iterator2['return'])</span> {
<span class="cstat-no" title="statement not covered" >                  _iterator2['return']();</span>
                }
              } finally {
                <span class="missing-if-branch" title="if path not taken" >I</span>if (_didIteratorError2) {
<span class="cstat-no" title="statement not covered" >                  throw _iteratorError2;</span>
                }
              }
            }
          }
        } catch (err) {
<span class="cstat-no" title="statement not covered" >          _didIteratorError = true;</span>
<span class="cstat-no" title="statement not covered" >          _iteratorError = err;</span>
        } finally {
          try {
            <span class="missing-if-branch" title="if path not taken" >I</span>if (!_iteratorNormalCompletion &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >_iterator['return'])</span> {
<span class="cstat-no" title="statement not covered" >              _iterator['return']();</span>
            }
          } finally {
            <span class="missing-if-branch" title="if path not taken" >I</span>if (_didIteratorError) {
<span class="cstat-no" title="statement not covered" >              throw _iteratorError;</span>
            }
          }
        }
&nbsp;
        message = message.slice(0, -1) + '.';
&nbsp;
        throw new _mobileJsonWireProtocol.errors.SessionNotCreatedError(message);
      }
&nbsp;
      this.logExtraCaps(caps);
&nbsp;
      return true;
    }
  }, {
    key: 'execute',
&nbsp;
    // This is the main command handler for the driver. It wraps command
    // execution with timeout logic, checking that we have a valid session,
    // and ensuring that we execute commands one at a time. This method is called
    // by MJSONWP's express router.
    value: function execute(cmd) {
      for (var _len = arguments.length, args = Array(_len &gt; 1 ? _len - 1 : 0), _key = 1; _key &lt; _len; _key++) {
        args[_key - 1] = arguments[_key];
      }
&nbsp;
      var nextCommand, res;
      return regeneratorRuntime.async(function execute$(context$2$0) {
        // istanbul ignore next
&nbsp;
        var _this = this;
&nbsp;
        while (1) switch (context$2$0.prev = context$2$0.next) {
          case 0:
            // if we had a command timer running, clear it now that we're starting
            // a new command and so don't want to time out
            if (this.noCommandTimer) {
              clearTimeout(this.noCommandTimer);
            }
&nbsp;
            <span class="missing-if-branch" title="else path not taken" >E</span>if (this[cmd]) {
              context$2$0.next = 3;
              break;
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            throw new _mobileJsonWireProtocol.errors.NotYetImplementedError();</span>
&nbsp;
          case 3:
            nextCommand = this.curCommand.then(function () {
              return _this[cmd].apply(_this, args);
            });
&nbsp;
            this.curCommand = nextCommand['catch'](function () {});
            context$2$0.next = 7;
            return regeneratorRuntime.awrap(nextCommand);
&nbsp;
          case 7:
            res = context$2$0.sent;
&nbsp;
            // if we have set a new command timeout (which is the default), start a
            // timer once we've finished executing this command. If we don't clear
            // the timer (which is done when a new command comes in), we will trigger
            // automatic session deletion in this.onCommandTimeout. Of course we don't
            // want to trigger the timer when the user is shutting down the session
            // intentionally
            if (this.newCommandTimeoutMs &amp;&amp; cmd !== 'deleteSession') {
              this.noCommandTimer = setTimeout(this.onCommandTimeout.bind(this), this.newCommandTimeoutMs);
            }
&nbsp;
            return context$2$0.abrupt('return', res);
&nbsp;
          case 10:
          case 'end':
            return context$2$0.stop();
        }
      }, null, this);
    }
  }, {
    key: 'onCommandTimeout',
    value: function onCommandTimeout() {
      return regeneratorRuntime.async(function onCommandTimeout$(context$2$0) {
        while (1) switch (context$2$0.prev = context$2$0.next) {
          case 0:
            _logger2['default'].warn('Shutting down because we waited ' + ('' + this.newCommandTimeoutMs / 1000 + ' seconds for a command'));
            context$2$0.next = 3;
            return regeneratorRuntime.awrap(this.deleteSession());
&nbsp;
          case 3:
          case 'end':
            return context$2$0.stop();
        }
      }, null, this);
    }
  }, {
    key: 'desiredCapConstraints',
&nbsp;
    // we only want subclasses to ever extend the contraints
    set: function (constraints) {
      this._constraints = Object.assign(this._constraints, constraints);
    },
    get: function () {
      return this._constraints;
    }
  }]);
&nbsp;
  return BaseDriver;
})(_mobileJsonWireProtocol.MobileJsonWireProtocol);
&nbsp;
var _iteratorNormalCompletion3 = true;
var _didIteratorError3 = false;
var _iteratorError3 = undefined;
&nbsp;
try {
&nbsp;
  for (var _iterator3 = _lodash2['default'].pairs(_commands2['default'])[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
    var _step3$value = _slicedToArray(_step3.value, 2);
&nbsp;
    var cmd = _step3$value[0];
    var fn = _step3$value[1];
&nbsp;
    BaseDriver.prototype[cmd] = fn;
  }
} catch (err) {
<span class="cstat-no" title="statement not covered" >  _didIteratorError3 = true;</span>
<span class="cstat-no" title="statement not covered" >  _iteratorError3 = err;</span>
} finally {
  try {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (!_iteratorNormalCompletion3 &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >_iterator3['return'])</span> {
<span class="cstat-no" title="statement not covered" >      _iterator3['return']();</span>
    }
  } finally {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (_didIteratorError3) {
<span class="cstat-no" title="statement not covered" >      throw _iteratorError3;</span>
    }
  }
}
&nbsp;
exports.BaseDriver = BaseDriver;
// if we don't have this command, it must not be implemented
&nbsp;
// What we're doing here is pretty clever. this.curCommand is always
// a promise representing the command currently being executed by the
// driver, or the last command executed by the driver (it starts off as
// essentially a pre-resolved promise). When a command comes in, we tack it
// to the end of this.curCommand, essentially saying we want to execute it
// whenever this.curCommand is done. We call this new promise nextCommand,
// and its resolution is what we ultimately will return to whomever called
// us. Meanwhile, we reset this.curCommand to _be_ nextCommand (but
// ignoring any rejections), so that if another command comes into the
// server, it gets tacked on to the end of nextCommand. Thus we create
// a chain of promises that acts as a queue with single concurrency.
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qbGlwcHMvQ29kZS9hcHBpdW0tYmFzZS1kcml2ZXIvbGliL2RyaXZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQ0FDdUIsMkJBQTJCOzt3QkFDN0IsWUFBWTs7OztzQkFDakIsVUFBVTs7OzsyQkFDOEIsZ0JBQWdCOzt3QkFDMUQsVUFBVTs7OztzQkFDVixRQUFROzs7O0FBRXRCLGFBSnVDLFNBQVMsQ0FJdEMsT0FBTyx3QkFBSSxDQUFDO0FBQ3RCLGFBTHVDLFNBQVMsQ0FLdEMsUUFBUSxHQUFHLFVBQUMsR0FBRyxFQUFLO0FBQUUsU0FBTyxHQUFHLENBQUM7Q0FBRSxDQUFDOztBQUU5QyxJQUFNLHNCQUFzQixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7O0lBRW5DLFVBQVU7QUFFRixXQUZSLFVBQVUsR0FFMEI7UUFBM0Isa0JBQWtCLGdDQUFHLElBQUk7OzBCQUZsQyxVQUFVOztBQUdaLCtCQUhFLFVBQVUsNkNBR0o7QUFDUixRQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUN0QixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNqQixRQUFJLENBQUMsbUJBQW1CLEdBQUcsc0JBQXNCLENBQUM7QUFDbEQsUUFBSSxDQUFDLFlBQVksR0FBRyxvQkFBRSxTQUFTLGNBaEIxQiw0QkFBNEIsQ0FnQjRCLENBQUM7OztBQUc5RCxRQUFJLENBQUMsVUFBVSxHQUFHLDBCQUFNLFVBQUMsQ0FBQyxFQUFLO0FBQUUsT0FBQyxFQUFFLENBQUM7S0FBRSxDQUFDLENBQUM7QUFDekMsUUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7QUFDM0IsUUFBSSxDQUFDLGtCQUFrQixHQUFHLGtCQUFrQixDQUFDO0dBQzlDOztZQWJHLFVBQVU7O2VBQVYsVUFBVTs7Ozs7V0EwQkEsdUJBQUMsU0FBUyxFQUFFO0FBQ3hCLFVBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxLQUFLLENB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SSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7S0FDbkU7U0FFeUIsWUFBRztBQUMzQixhQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7S0FDMUI7OztTQXRCRyxVQUFVOzJCQWJQLHNCQUFzQjs7Ozs7Ozs7QUE0SS9CLHdCQUFzQixvQkFBRSxLQUFLLHVCQUFVLG1JQUFFOzs7UUFBL0IsR0FBRztRQUFFLEVBQUU7O0FBQ2YsY0FBVSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7R0FDaEM7Ozs7Ozs7Ozs7Ozs7Ozs7UUFFUSxVQUFVLEdBQVYsVUFBVSIsImZpbGUiOiIvVXNlcnMvamxpcHBzL0NvZGUvYXBwaXVtLWJhc2UtZHJpdmVyL2xpYi9kcml2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2JpbGVKc29uV2lyZVByb3RvY29sLFxuICAgICAgICAgZXJyb3JzIH0gZnJvbSAnbW9iaWxlLWpzb24td2lyZS1wcm90b2NvbCc7XG5pbXBvcnQgY29tbWFuZHMgZnJvbSAnLi9jb21tYW5kcyc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IGRlc2lyZWRDYXBhYmlsaXR5Q29uc3RyYWludHMsIHZhbGlkYXRvciB9IGZyb20gJy4vZGVzaXJlZC1jYXBzJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbnZhbGlkYXRvci5wcm9taXNlID0gQjtcbnZhbGlkYXRvci5wcmV0dGlmeSA9ICh2YWwpID0+IHsgcmV0dXJuIHZhbDsgfTtcblxuY29uc3QgTkVXX0NPTU1BTkRfVElNRU9VVF9NUyA9IDYwICogMTAwMDtcblxuY2xhc3MgQmFzZURyaXZlciBleHRlbmRzIE1vYmlsZUpzb25XaXJlUHJvdG9jb2wge1xuXG4gIGNvbnN0cnVjdG9yIChzaG91bGRWYWxpZGF0ZUNhcHMgPSB0cnVlKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7XG4gICAgdGhpcy5jYXBzID0gbnVsbDtcbiAgICB0aGlzLm5ld0NvbW1hbmRUaW1lb3V0TXMgPSBORVdfQ09NTUFORF9USU1FT1VUX01TO1xuICAgIHRoaXMuX2NvbnN0cmFpbnRzID0gXy5jbG9uZURlZXAoZGVzaXJlZENhcGFiaWxpdHlDb25zdHJhaW50cyk7XG5cbiAgICAvLyBiYXNlLWRyaXZlciBpbnRlcm5hbHNcbiAgICB0aGlzLmN1ckNvbW1hbmQgPSBuZXcgQigocikgPT4geyByKCk7IH0pOyAvLyBzZWUgbm90ZSBpbiBleGVjdXRlXG4gICAgdGhpcy5ub0NvbW1hbmRUaW1lciA9IG51bGw7XG4gICAgdGhpcy5zaG91bGRWYWxpZGF0ZUNhcHMgPSBzaG91bGRWYWxpZGF0ZUNhcHM7XG4gIH1cblxuICAvLyB3ZSBvbmx5IHdhbnQgc3ViY2xhc3NlcyB0byBldmVyIGV4dGVuZCB0aGUgY29udHJhaW50c1xuICBzZXQgZGVzaXJlZENhcENvbnN0cmFpbnRzIChjb25zdHJhaW50cykge1xuICAgIHRoaXMuX2NvbnN0cmFpbnRzID0gT2JqZWN0LmFzc2lnbih0aGlzLl9jb25zdHJhaW50cywgY29uc3RyYWludHMpO1xuICB9XG5cbiAgZ2V0IGRlc2lyZWRDYXBDb25zdHJhaW50cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzO1xuICB9XG5cbiAgLy8gbWV0aG9kIHJlcXVpcmVkIGJ5IE1KU09OV1AgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaXQgc2hvdWxkXG4gIC8vIHJlc3BvbmQgd2l0aCBhbiBpbnZhbGlkIHNlc3Npb24gcmVzcG9uc2VcbiAgc2Vzc2lvbkV4aXN0cyAoc2Vzc2lvbklkKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gc2Vzc2lvbklkID09PSB0aGlzLnNlc3Npb25JZDtcbiAgfVxuXG4gIGxvZ0V4dHJhQ2FwcyAoY2Fwcykge1xuICAgIGxldCBleHRyYUNhcHMgPSBfLmRpZmZlcmVuY2UoXy5rZXlzKGNhcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5rZXlzKHRoaXMuX2NvbnN0cmFpbnRzKSk7XG4gICAgaWYgKGV4dHJhQ2Fwcy5sZW5ndGgpIHtcbiAgICAgIGxvZy53YXJuKGBUaGUgZm9sbG93aW5nIGNhcGFiaWxpdGllcyB3ZXJlIHByb3ZpZGVkLCBidXQgYXJlIG5vdCBgICtcbiAgICAgICAgICAgICAgIGByZWNvZ25pemVkIGJ5IGFwcGl1bTogJHtleHRyYUNhcHMuam9pbignLCAnKX0uYCk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVEZXNpcmVkQ2FwcyAoY2Fwcykge1xuICAgIGlmICghdGhpcy5zaG91bGRWYWxpZGF0ZUNhcHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGxldCB2YWxpZGF0aW9uT3B0aW9ucyA9IHtmdWxsTWVzc2FnZXM6IGZhbHNlfTtcblxuICAgIGxldCB2YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdG9yLnZhbGlkYXRlKGNhcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbk9wdGlvbnMpO1xuXG5cbiAgICBpZiAodmFsaWRhdGlvbkVycm9ycykge1xuICAgICAgbGV0IG1lc3NhZ2UgPSBgVGhlIGRlc2lyZWRDYXBhYmlsaXRpZXMgb2JqZWN0IHdhcyBub3QgdmFsaWQgZm9yIHRoZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGZvbGxvd2luZyByZWFzb24ocyk6YDtcblxuXG4gICAgICBmb3IgKGxldCBbYXR0cmlidXRlLCByZWFzb25zXSBvZiBfLnBhaXJzKHZhbGlkYXRpb25FcnJvcnMpKSB7XG4gICAgICAgIGZvciAobGV0IHJlYXNvbiBvZiByZWFzb25zKSB7XG4gICAgICAgICAgbWVzc2FnZSArPSBgICR7YXR0cmlidXRlfSAke3JlYXNvbn0sYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc2xpY2UoMCwgLTEpICsgJy4nO1xuXG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLlNlc3Npb25Ob3RDcmVhdGVkRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2dFeHRyYUNhcHMoY2Fwcyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgdGhlIG1haW4gY29tbWFuZCBoYW5kbGVyIGZvciB0aGUgZHJpdmVyLiBJdCB3cmFwcyBjb21tYW5kXG4gIC8vIGV4ZWN1dGlvbiB3aXRoIHRpbWVvdXQgbG9naWMsIGNoZWNraW5nIHRoYXQgd2UgaGF2ZSBhIHZhbGlkIHNlc3Npb24sXG4gIC8vIGFuZCBlbnN1cmluZyB0aGF0IHdlIGV4ZWN1dGUgY29tbWFuZHMgb25lIGF0IGEgdGltZS4gVGhpcyBtZXRob2QgaXMgY2FsbGVkXG4gIC8vIGJ5IE1KU09OV1AncyBleHByZXNzIHJvdXRlci5cbiAgYXN5bmMgZXhlY3V0ZSAoY21kLCAuLi5hcmdzKSB7XG4gICAgLy8gaWYgd2UgaGFkIGEgY29tbWFuZCB0aW1lciBydW5uaW5nLCBjbGVhciBpdCBub3cgdGhhdCB3ZSdyZSBzdGFydGluZ1xuICAgIC8vIGEgbmV3IGNvbW1hbmQgYW5kIHNvIGRvbid0IHdhbnQgdG8gdGltZSBvdXRcbiAgICBpZiAodGhpcy5ub0NvbW1hbmRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm9Db21tYW5kVGltZXIpO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgdGhpcyBjb21tYW5kLCBpdCBtdXN0IG5vdCBiZSBpbXBsZW1lbnRlZFxuICAgIGlmICghdGhpc1tjbWRdKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdFlldEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICAvLyBXaGF0IHdlJ3JlIGRvaW5nIGhlcmUgaXMgcHJldHR5IGNsZXZlci4gdGhpcy5jdXJDb21tYW5kIGlzIGFsd2F5c1xuICAgIC8vIGEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIGNvbW1hbmQgY3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkIGJ5IHRoZVxuICAgIC8vIGRyaXZlciwgb3IgdGhlIGxhc3QgY29tbWFuZCBleGVjdXRlZCBieSB0aGUgZHJpdmVyIChpdCBzdGFydHMgb2ZmIGFzXG4gICAgLy8gZXNzZW50aWFsbHkgYSBwcmUtcmVzb2x2ZWQgcHJvbWlzZSkuIFdoZW4gYSBjb21tYW5kIGNvbWVzIGluLCB3ZSB0YWNrIGl0XG4gICAgLy8gdG8gdGhlIGVuZCBvZiB0aGlzLmN1ckNvbW1hbmQsIGVzc2VudGlhbGx5IHNheWluZyB3ZSB3YW50IHRvIGV4ZWN1dGUgaXRcbiAgICAvLyB3aGVuZXZlciB0aGlzLmN1ckNvbW1hbmQgaXMgZG9uZS4gV2UgY2FsbCB0aGlzIG5ldyBwcm9taXNlIG5leHRDb21tYW5kLFxuICAgIC8vIGFuZCBpdHMgcmVzb2x1dGlvbiBpcyB3aGF0IHdlIHVsdGltYXRlbHkgd2lsbCByZXR1cm4gdG8gd2hvbWV2ZXIgY2FsbGVkXG4gICAgLy8gdXMuIE1lYW53aGlsZSwgd2UgcmVzZXQgdGhpcy5jdXJDb21tYW5kIHRvIF9iZV8gbmV4dENvbW1hbmQgKGJ1dFxuICAgIC8vIGlnbm9yaW5nIGFueSByZWplY3Rpb25zKSwgc28gdGhhdCBpZiBhbm90aGVyIGNvbW1hbmQgY29tZXMgaW50byB0aGVcbiAgICAvLyBzZXJ2ZXIsIGl0IGdldHMgdGFja2VkIG9uIHRvIHRoZSBlbmQgb2YgbmV4dENvbW1hbmQuIFRodXMgd2UgY3JlYXRlXG4gICAgLy8gYSBjaGFpbiBvZiBwcm9taXNlcyB0aGF0IGFjdHMgYXMgYSBxdWV1ZSB3aXRoIHNpbmdsZSBjb25jdXJyZW5jeS5cbiAgICBsZXQgbmV4dENvbW1hbmQgPSB0aGlzLmN1ckNvbW1hbmQudGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpc1tjbWRdKC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIHRoaXMuY3VyQ29tbWFuZCA9IG5leHRDb21tYW5kLmNhdGNoKCgpID0+IHt9KTtcbiAgICBsZXQgcmVzID0gYXdhaXQgbmV4dENvbW1hbmQ7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIHNldCBhIG5ldyBjb21tYW5kIHRpbWVvdXQgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSwgc3RhcnQgYVxuICAgIC8vIHRpbWVyIG9uY2Ugd2UndmUgZmluaXNoZWQgZXhlY3V0aW5nIHRoaXMgY29tbWFuZC4gSWYgd2UgZG9uJ3QgY2xlYXJcbiAgICAvLyB0aGUgdGltZXIgKHdoaWNoIGlzIGRvbmUgd2hlbiBhIG5ldyBjb21tYW5kIGNvbWVzIGluKSwgd2Ugd2lsbCB0cmlnZ2VyXG4gICAgLy8gYXV0b21hdGljIHNlc3Npb24gZGVsZXRpb24gaW4gdGhpcy5vbkNvbW1hbmRUaW1lb3V0LiBPZiBjb3Vyc2Ugd2UgZG9uJ3RcbiAgICAvLyB3YW50IHRvIHRyaWdnZXIgdGhlIHRpbWVyIHdoZW4gdGhlIHVzZXIgaXMgc2h1dHRpbmcgZG93biB0aGUgc2Vzc2lvblxuICAgIC8vIGludGVudGlvbmFsbHlcbiAgICBpZiAodGhpcy5uZXdDb21tYW5kVGltZW91dE1zICYmIGNtZCAhPT0gJ2RlbGV0ZVNlc3Npb24nKSB7XG4gICAgICB0aGlzLm5vQ29tbWFuZFRpbWVyID0gc2V0VGltZW91dCh0aGlzLm9uQ29tbWFuZFRpbWVvdXQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3Q29tbWFuZFRpbWVvdXRNcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGFzeW5jIG9uQ29tbWFuZFRpbWVvdXQgKCkge1xuICAgIGxvZy53YXJuKGBTaHV0dGluZyBkb3duIGJlY2F1c2Ugd2Ugd2FpdGVkIGAgK1xuICAgICAgICAgICAgIGAke3RoaXMubmV3Q29tbWFuZFRpbWVvdXRNcyAvIDEwMDB9IHNlY29uZHMgZm9yIGEgY29tbWFuZGApO1xuICAgIGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbigpO1xuICB9XG5cbn1cblxuZm9yIChsZXQgW2NtZCwgZm5dIG9mIF8ucGFpcnMoY29tbWFuZHMpKSB7XG4gIEJhc2VEcml2ZXIucHJvdG90eXBlW2NtZF0gPSBmbjtcbn1cblxuZXhwb3J0IHsgQmFzZURyaXZlciB9O1xuIl19</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Jun 10 2015 12:36:51 GMT-0700 (PDT)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
