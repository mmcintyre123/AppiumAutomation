'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _helpersEnv = require('../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

var _setupBase = require("../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('./desired');

var _desired2 = _interopRequireDefault(_desired);

describe('uicatalog - lock device', function () {
  var _this = this;

  var session = (0, _setupBase2['default'])(this, _desired2['default']);
  var driver = session.driver;

  var allowance = _helpersEnv2['default'].IOS7 || _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? 10 : 2;
  it('should lock the device for 4 seconds (+/- ' + allowance + ' secs)', function callee$1$0() {
    var before, now;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          before = new Date().getTime() / 1000;
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.lock(4));

        case 3:
          now = new Date().getTime() / 1000;

          (now - before).should.be.above(4);
          (now - before).should.be.below(4 + allowance + 1);

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should default to 0 lock the device for +/- ' + allowance + ' secs', function callee$1$0() {
    var before, now;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          before = new Date().getTime() / 1000;
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.lock(0));

        case 3:
          now = new Date().getTime() / 1000;

          (now - before).should.be.above(0);
          (now - before).should.be.below(allowance + 1);

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3VpY2F0YWxvZy9sb2NrLWRldmljZS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7MEJBQWdCLGdCQUFnQjs7Ozt5QkFDZCxlQUFlOzs7O3VCQUNiLFdBQVc7Ozs7QUFFL0IsUUFBUSxDQUFDLHlCQUF5QixFQUFFLFlBQVk7OztBQUM5QyxNQUFJLE9BQU8sR0FBRyw0QkFBTSxJQUFJLHVCQUFVLENBQUM7QUFDbkMsTUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQzs7QUFFNUIsTUFBSSxTQUFTLEdBQUcsQUFBQyx3QkFBSSxJQUFJLElBQUksd0JBQUksSUFBSSxJQUFJLHdCQUFJLElBQUksR0FBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzVELElBQUUsZ0RBQThDLFNBQVMsYUFBVTtRQUM3RCxNQUFNLEVBRU4sR0FBRzs7OztBQUZILGdCQUFNLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJOzsyQ0FDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7OztBQUNoQixhQUFHLEdBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJOztBQUN0QyxXQUFDLEdBQUcsR0FBRyxNQUFNLENBQUEsQ0FBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxXQUFDLEdBQUcsR0FBRyxNQUFNLENBQUEsQ0FBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDOzs7Ozs7O0dBQ25ELENBQUMsQ0FBQztBQUNILElBQUUsa0RBQWdELFNBQVMsWUFBUztRQUM5RCxNQUFNLEVBRU4sR0FBRzs7OztBQUZILGdCQUFNLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJOzsyQ0FDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7OztBQUNoQixhQUFHLEdBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJOztBQUN0QyxXQUFDLEdBQUcsR0FBRyxNQUFNLENBQUEsQ0FBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxXQUFDLEdBQUcsR0FBRyxNQUFNLENBQUEsQ0FBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUM7Ozs7Ozs7R0FDL0MsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvZTJlL3VpY2F0YWxvZy9sb2NrLWRldmljZS1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlbnYgZnJvbSAnLi4vaGVscGVycy9lbnYnO1xuaW1wb3J0IHNldHVwIGZyb20gXCIuLi9zZXR1cC1iYXNlXCI7XG5pbXBvcnQgZGVzaXJlZCBmcm9tICcuL2Rlc2lyZWQnO1xuXG5kZXNjcmliZSgndWljYXRhbG9nIC0gbG9jayBkZXZpY2UnLCBmdW5jdGlvbiAoKSB7XG4gIGxldCBzZXNzaW9uID0gc2V0dXAodGhpcywgZGVzaXJlZCk7XG4gIGxldCBkcml2ZXIgPSBzZXNzaW9uLmRyaXZlcjtcblxuICBsZXQgYWxsb3dhbmNlID0gKGVudi5JT1M3IHx8IGVudi5JT1M4IHx8IGVudi5JT1M5KSA/IDEwIDogMjtcbiAgaXQoYHNob3VsZCBsb2NrIHRoZSBkZXZpY2UgZm9yIDQgc2Vjb25kcyAoKy8tICR7YWxsb3dhbmNlfSBzZWNzKWAsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgYmVmb3JlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwO1xuICAgIGF3YWl0IGRyaXZlci5sb2NrKDQpO1xuICAgIGxldCBub3cgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICAobm93IC0gYmVmb3JlKS5zaG91bGQuYmUuYWJvdmUoNCk7XG4gICAgKG5vdyAtIGJlZm9yZSkuc2hvdWxkLmJlLmJlbG93KDQgKyBhbGxvd2FuY2UgKyAxKTtcbiAgfSk7XG4gIGl0KGBzaG91bGQgZGVmYXVsdCB0byAwIGxvY2sgdGhlIGRldmljZSBmb3IgKy8tICR7YWxsb3dhbmNlfSBzZWNzYCwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBiZWZvcmUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgYXdhaXQgZHJpdmVyLmxvY2soMCk7XG4gICAgbGV0IG5vdyA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xuICAgIChub3cgLSBiZWZvcmUpLnNob3VsZC5iZS5hYm92ZSgwKTtcbiAgICAobm93IC0gYmVmb3JlKS5zaG91bGQuYmUuYmVsb3coYWxsb3dhbmNlICsgMSk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
