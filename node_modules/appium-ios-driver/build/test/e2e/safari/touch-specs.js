'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _setupBase = require("../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _helpersEnv = require('../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

/**
 * touch command doesn't work
 */
describe.skip('touch', function () {
  var _this = this;

  var driver = (0, _setupBase2['default'])(this, {
    browserName: "safari"
  }, {
    noReset: true
  }).driver;

  it('should flick element', function callee$1$0() {
    var flickElem, l1, dx, dy, l2;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.setUrl(_helpersEnv2['default'].TEST_END_POINT + 'touch.html'));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'flickElem'));

        case 4:
          flickElem = context$2$0.sent;
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.getLocation(flickElem));

        case 7:
          l1 = context$2$0.sent;
          dx = 30, dy = 30;
          context$2$0.next = 11;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'flickElem'));

        case 11:
          flickElem = context$2$0.sent;
          context$2$0.next = 14;
          return _regeneratorRuntime.awrap(driver.flick(flickElem, dx, dy, 0));

        case 14:
          context$2$0.next = 16;
          return _regeneratorRuntime.awrap(_bluebird2['default'].delay(1000));

        case 16:
          context$2$0.next = 18;
          return _regeneratorRuntime.awrap(driver.getLocation(flickElem));

        case 18:
          l2 = context$2$0.sent;

          // UI Atomation's flickFromTo() seems to be not prices enough.
          // And in most cases safari receives the last touchmove event
          // with the coordinates which are by one pixel less than desired
          // destination. Hence allow some deviation here.
          l2.x.should.be.within(l1.x + dx - 2, l1.x + dx + 2);
          l2.y.should.be.within(l1.y + dy - 2, l1.y + dy + 2);

        case 21:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should not be able to do native touch actions', function callee$1$0() {
    var el, gestures;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'comments'));

        case 2:
          el = context$2$0.sent;
          gestures = [{ action: 'press', options: { element: el } }, { action: 'release' }];
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(driver.performTouch(gestures).should.eventually.be.rejected);

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3NhZmFyaS90b3VjaC1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7eUJBQWtCLGVBQWU7Ozs7MEJBQ2pCLGdCQUFnQjs7Ozt3QkFDbEIsVUFBVTs7Ozs7OztBQU14QixRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxZQUFZOzs7QUFDakMsTUFBTSxNQUFNLEdBQUcsNEJBQU0sSUFBSSxFQUFFO0FBQ3pCLGVBQVcsRUFBRSxRQUFRO0dBQ3RCLEVBQUU7QUFDRCxXQUFPLEVBQUUsSUFBSTtHQUNkLENBQUMsQ0FBQyxNQUFNLENBQUM7O0FBRVYsSUFBRSxDQUFDLHNCQUFzQixFQUFFO1FBRXJCLFNBQVMsRUFFVCxFQUFFLEVBQ0YsRUFBRSxFQUFPLEVBQUUsRUFNWCxFQUFFOzs7OzsyQ0FWQSxNQUFNLENBQUMsTUFBTSxDQUFJLHdCQUFJLGNBQWMsZ0JBQWE7Ozs7MkNBQ2hDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQzs7O0FBQXZELG1CQUFTOzsyQ0FFRSxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQzs7O0FBQXhDLFlBQUU7QUFDRixZQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFOzsyQ0FFRixNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxXQUFXLENBQUM7OztBQUF2RCxtQkFBUzs7MkNBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7Ozs7MkNBQ2xDLHNCQUFFLEtBQUssQ0FBQyxJQUFJLENBQUM7Ozs7MkNBRUosTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUM7OztBQUF4QyxZQUFFOzs7Ozs7QUFNTixZQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNwRCxZQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQzs7Ozs7OztHQUNyRCxDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLCtDQUErQyxFQUFFO1FBQzlDLEVBQUUsRUFDRixRQUFROzs7OzsyQ0FERyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUM7OztBQUEvQyxZQUFFO0FBQ0Ysa0JBQVEsR0FBRyxDQUNiLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBQyxPQUFPLEVBQUUsRUFBRSxFQUFDLEVBQUMsRUFDekMsRUFBQyxNQUFNLEVBQUUsU0FBUyxFQUFDLENBQ3BCOzsyQ0FDSyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFFBQVE7Ozs7Ozs7R0FDbEUsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvZTJlL3NhZmFyaS90b3VjaC1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZXR1cCBmcm9tIFwiLi4vc2V0dXAtYmFzZVwiO1xuaW1wb3J0IGVudiBmcm9tICcuLi9oZWxwZXJzL2Vudic7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5cblxuLyoqXG4gKiB0b3VjaCBjb21tYW5kIGRvZXNuJ3Qgd29ya1xuICovXG5kZXNjcmliZS5za2lwKCd0b3VjaCcsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZHJpdmVyID0gc2V0dXAodGhpcywge1xuICAgIGJyb3dzZXJOYW1lOiBcInNhZmFyaVwiXG4gIH0sIHtcbiAgICBub1Jlc2V0OiB0cnVlXG4gIH0pLmRyaXZlcjtcblxuICBpdCgnc2hvdWxkIGZsaWNrIGVsZW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZHJpdmVyLnNldFVybChgJHtlbnYuVEVTVF9FTkRfUE9JTlR9dG91Y2guaHRtbGApO1xuICAgIGxldCBmbGlja0VsZW0gPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2lkJywgJ2ZsaWNrRWxlbScpO1xuXG4gICAgbGV0IGwxID0gYXdhaXQgZHJpdmVyLmdldExvY2F0aW9uKGZsaWNrRWxlbSk7XG4gICAgbGV0IGR4ID0gMzAsIGR5ID0gMzA7XG5cbiAgICBmbGlja0VsZW0gPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2lkJywgJ2ZsaWNrRWxlbScpO1xuICAgIGF3YWl0IGRyaXZlci5mbGljayhmbGlja0VsZW0sIGR4LCBkeSwgMCk7XG4gICAgYXdhaXQgQi5kZWxheSgxMDAwKTtcblxuICAgIGxldCBsMiA9IGF3YWl0IGRyaXZlci5nZXRMb2NhdGlvbihmbGlja0VsZW0pO1xuXG4gICAgLy8gVUkgQXRvbWF0aW9uJ3MgZmxpY2tGcm9tVG8oKSBzZWVtcyB0byBiZSBub3QgcHJpY2VzIGVub3VnaC5cbiAgICAvLyBBbmQgaW4gbW9zdCBjYXNlcyBzYWZhcmkgcmVjZWl2ZXMgdGhlIGxhc3QgdG91Y2htb3ZlIGV2ZW50XG4gICAgLy8gd2l0aCB0aGUgY29vcmRpbmF0ZXMgd2hpY2ggYXJlIGJ5IG9uZSBwaXhlbCBsZXNzIHRoYW4gZGVzaXJlZFxuICAgIC8vIGRlc3RpbmF0aW9uLiBIZW5jZSBhbGxvdyBzb21lIGRldmlhdGlvbiBoZXJlLlxuICAgIGwyLnguc2hvdWxkLmJlLndpdGhpbihsMS54ICsgZHggLSAyLCBsMS54ICsgZHggKyAyKTtcbiAgICBsMi55LnNob3VsZC5iZS53aXRoaW4obDEueSArIGR5IC0gMiwgbDEueSArIGR5ICsgMik7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGJlIGFibGUgdG8gZG8gbmF0aXZlIHRvdWNoIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdjb21tZW50cycpO1xuICAgIGxldCBnZXN0dXJlcyA9IFtcbiAgICAgIHthY3Rpb246ICdwcmVzcycsIG9wdGlvbnM6IHtlbGVtZW50OiBlbH19LFxuICAgICAge2FjdGlvbjogJ3JlbGVhc2UnfVxuICAgIF07XG4gICAgYXdhaXQgZHJpdmVyLnBlcmZvcm1Ub3VjaChnZXN0dXJlcykuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
