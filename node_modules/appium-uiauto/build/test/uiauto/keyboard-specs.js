require('source-map-support').install();

/* globals $ */

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _base = require('./base');

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

describe('keyboard', function () {
  var imports = { post: ['uiauto/lib/mechanic-ext/gesture-ext.js', 'uiauto/lib/mechanic-ext/device-ext.js', 'uiauto/lib/mechanic-ext/keyboard-ext.js', 'uiauto/lib/element-patch/nil-patch.js'] };
  (0, _base.globalInit)(this, { imports: imports, bootstrap: 'basic' });

  describe('hide keyboard', function () {
    var _this = this;

    /* globals rootPage: true */
    var ctx = undefined;
    beforeEach(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap((0, _base.instrumentsInstanceInit)());

          case 2:
            ctx = context$3$0.sent;

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    afterEach(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap((0, _base.killAll)(ctx));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    // afterEach(async () => {
    //   await ctx.execFunc(
    //     function () {
    //       $.back();
    //       $.delay(1000);
    //     }
    //   );
    // });

    _lodash2['default'].each(['pressKey', 'press'], function (strategy) {
      var _this2 = this;

      it('should hide the keyboard by pressing the done key (' + strategy + ')', function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(ctx.execFunc(function (strategy) {
                rootPage.clickMenuItem('Text Fields');
                $('textfield').first().tap();
                $('#Done').should.have.length(1);
                $.hideKeyboard(strategy, 'Done');
                $('#Done').should.have.length(0);
              }, [strategy]));

            case 2:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this2);
      });
    });

    _lodash2['default'].each(['tapOutside', 'tapOut'], function (strategy) {
      var _this3 = this;

      it('should hide the keyboard by tapping outside (' + strategy + ')', function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(ctx.execFunc(function (strategy) {
                rootPage.clickMenuItem('Web View');
                $('textfield').first().tap();
                $('#Go').should.have.length(1);
                $.hideKeyboard(strategy);
                $('#Go').should.have.length(0);
              }, [strategy]));

            case 2:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this3);
      });
    });

    it('should hide the keyboard with the default strategy', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(ctx.execFunc(function () {
              rootPage.clickMenuItem('Web View');
              $('textfield').first().tap();
              $('#Go').should.have.length(1);
              $.hideKeyboard('default');
              $('#Go').should.have.length(0);
            }));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdWlhdXRvL2tleWJvYXJkLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztvQkFHNkQsUUFBUTs7c0JBQ3ZELFFBQVE7Ozs7QUFHdEIsUUFBUSxDQUFDLFVBQVUsRUFBRSxZQUFZO0FBQy9CLE1BQUksT0FBTyxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQ3BCLHdDQUF3QyxFQUN4Qyx1Q0FBdUMsRUFDdkMseUNBQXlDLEVBQ3pDLHVDQUF1QyxDQUN4QyxFQUFDLENBQUM7QUFDSCx3QkFBVyxJQUFJLEVBQUUsRUFBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDOztBQUV6RCxVQUFRLENBQUMsZUFBZSxFQUFFLFlBQVk7Ozs7QUFFcEMsUUFBSSxHQUFHLFlBQUEsQ0FBQztBQUNSLGNBQVUsQ0FBQzs7Ozs7NkNBQ0csb0NBQXlCOzs7QUFBckMsZUFBRzs7Ozs7OztLQUNKLENBQUMsQ0FBQztBQUNILGFBQVMsQ0FBQzs7Ozs7NkNBQ0YsbUJBQVEsR0FBRyxDQUFDOzs7Ozs7O0tBQ25CLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7QUFXSCx3QkFBRSxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLEVBQUUsVUFBVSxRQUFRLEVBQUU7OztBQUNoRCxRQUFFLHlEQUF1RCxRQUFRLFFBQUs7Ozs7OytDQUM5RCxHQUFHLENBQUMsUUFBUSxDQUNoQixVQUFVLFFBQVEsRUFBRTtBQUNsQix3QkFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN0QyxpQkFBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzdCLGlCQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakMsaUJBQUMsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLGlCQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7ZUFDbEMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUNkOzs7Ozs7O09BQ0YsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDOztBQUVILHdCQUFFLElBQUksQ0FBQyxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsRUFBRSxVQUFVLFFBQVEsRUFBRTs7O0FBQ25ELFFBQUUsbURBQWlELFFBQVEsUUFBSzs7Ozs7K0NBQ3hELEdBQUcsQ0FBQyxRQUFRLENBQ2hCLFVBQVUsUUFBUSxFQUFFO0FBQ2xCLHdCQUFRLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLGlCQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDN0IsaUJBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixpQkFBQyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN6QixpQkFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2VBQ2hDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FDZDs7Ozs7OztPQUNGLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQzs7QUFFSCxNQUFFLENBQUMsb0RBQW9ELEVBQUU7Ozs7OzZDQUNqRCxHQUFHLENBQUMsUUFBUSxDQUNoQixZQUFZO0FBQ1Ysc0JBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbkMsZUFBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzdCLGVBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixlQUFDLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFCLGVBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNoQyxDQUNGOzs7Ozs7O0tBQ0YsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdWlhdXRvL2tleWJvYXJkLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhbnNwaWxlOm1vY2hhXG4vKiBnbG9iYWxzICQgKi9cblxuaW1wb3J0IHsgaW5zdHJ1bWVudHNJbnN0YW5jZUluaXQsIGdsb2JhbEluaXQsIGtpbGxBbGwgfSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuXG5kZXNjcmliZSgna2V5Ym9hcmQnLCBmdW5jdGlvbiAoKSB7XG4gIGxldCBpbXBvcnRzID0geyBwb3N0OiBbXG4gICAgJ3VpYXV0by9saWIvbWVjaGFuaWMtZXh0L2dlc3R1cmUtZXh0LmpzJyxcbiAgICAndWlhdXRvL2xpYi9tZWNoYW5pYy1leHQvZGV2aWNlLWV4dC5qcycsXG4gICAgJ3VpYXV0by9saWIvbWVjaGFuaWMtZXh0L2tleWJvYXJkLWV4dC5qcycsXG4gICAgJ3VpYXV0by9saWIvZWxlbWVudC1wYXRjaC9uaWwtcGF0Y2guanMnXG4gIF19O1xuICBnbG9iYWxJbml0KHRoaXMsIHtpbXBvcnRzOiBpbXBvcnRzLCBib290c3RyYXA6ICdiYXNpYyd9KTtcblxuICBkZXNjcmliZSgnaGlkZSBrZXlib2FyZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAvKiBnbG9iYWxzIHJvb3RQYWdlOiB0cnVlICovXG4gICAgbGV0IGN0eDtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGN0eCA9IGF3YWl0IGluc3RydW1lbnRzSW5zdGFuY2VJbml0KCk7XG4gICAgfSk7XG4gICAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGtpbGxBbGwoY3R4KTtcbiAgICB9KTtcblxuICAgIC8vIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gICBhd2FpdCBjdHguZXhlY0Z1bmMoXG4gICAgLy8gICAgIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAkLmJhY2soKTtcbiAgICAvLyAgICAgICAkLmRlbGF5KDEwMDApO1xuICAgIC8vICAgICB9XG4gICAgLy8gICApO1xuICAgIC8vIH0pO1xuXG4gICAgXy5lYWNoKFsncHJlc3NLZXknLCAncHJlc3MnXSwgZnVuY3Rpb24gKHN0cmF0ZWd5KSB7XG4gICAgICBpdChgc2hvdWxkIGhpZGUgdGhlIGtleWJvYXJkIGJ5IHByZXNzaW5nIHRoZSBkb25lIGtleSAoJHtzdHJhdGVneX0pYCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjdHguZXhlY0Z1bmMoXG4gICAgICAgICAgZnVuY3Rpb24gKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICByb290UGFnZS5jbGlja01lbnVJdGVtKCdUZXh0IEZpZWxkcycpO1xuICAgICAgICAgICAgJCgndGV4dGZpZWxkJykuZmlyc3QoKS50YXAoKTtcbiAgICAgICAgICAgICQoJyNEb25lJykuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgICAgICAgICAgJC5oaWRlS2V5Ym9hcmQoc3RyYXRlZ3ksICdEb25lJyk7XG4gICAgICAgICAgICAkKCcjRG9uZScpLnNob3VsZC5oYXZlLmxlbmd0aCgwKTtcbiAgICAgICAgICB9LCBbc3RyYXRlZ3ldXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF8uZWFjaChbJ3RhcE91dHNpZGUnLCAndGFwT3V0J10sIGZ1bmN0aW9uIChzdHJhdGVneSkge1xuICAgICAgaXQoYHNob3VsZCBoaWRlIHRoZSBrZXlib2FyZCBieSB0YXBwaW5nIG91dHNpZGUgKCR7c3RyYXRlZ3l9KWAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY3R4LmV4ZWNGdW5jKFxuICAgICAgICAgIGZ1bmN0aW9uIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcm9vdFBhZ2UuY2xpY2tNZW51SXRlbSgnV2ViIFZpZXcnKTtcbiAgICAgICAgICAgICQoJ3RleHRmaWVsZCcpLmZpcnN0KCkudGFwKCk7XG4gICAgICAgICAgICAkKCcjR28nKS5zaG91bGQuaGF2ZS5sZW5ndGgoMSk7XG4gICAgICAgICAgICAkLmhpZGVLZXlib2FyZChzdHJhdGVneSk7XG4gICAgICAgICAgICAkKCcjR28nKS5zaG91bGQuaGF2ZS5sZW5ndGgoMCk7XG4gICAgICAgICAgfSwgW3N0cmF0ZWd5XVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhpZGUgdGhlIGtleWJvYXJkIHdpdGggdGhlIGRlZmF1bHQgc3RyYXRlZ3knLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBjdHguZXhlY0Z1bmMoXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByb290UGFnZS5jbGlja01lbnVJdGVtKCdXZWIgVmlldycpO1xuICAgICAgICAgICQoJ3RleHRmaWVsZCcpLmZpcnN0KCkudGFwKCk7XG4gICAgICAgICAgJCgnI0dvJykuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgICAgICAgICQuaGlkZUtleWJvYXJkKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgJCgnI0dvJykuc2hvdWxkLmhhdmUubGVuZ3RoKDApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19