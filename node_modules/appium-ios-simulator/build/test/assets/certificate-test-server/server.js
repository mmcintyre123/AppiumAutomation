/* eslint-disable no-console */
'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _https = require('https');

var _https2 = _interopRequireDefault(_https);

var _inquirer = require('inquirer');

var _inquirer2 = _interopRequireDefault(_inquirer);

var _libUtils = require('../../../lib/utils');

var _nodeSimctl = require('node-simctl');

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

/* jshint ignore:start */ /* eslint-disable no-unused-vars */

var _colors = require('colors');

var _colors2 = _interopRequireDefault(_colors);

/* eslint-enable */ /* jshint ignore:end */

var pem = _bluebird2['default'].promisifyAll(require('pem'));

(function callee$0$0() {
  var key, keys, server, devices, bootedDevices, osName, os, _deviceName, device, bootedDevice, udid, deviceName, done, result;

  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        done = function done() {
          return _regeneratorRuntime.async(function done$(context$2$0) {
            while (1) switch (context$2$0.prev = context$2$0.next) {
              case 0:
                context$2$0.next = 2;
                return _regeneratorRuntime.awrap((0, _libUtils.uninstallSSLCert)(keys.certificate, udid));

              case 2:
                server.close();
                console.log('Incomplete/failed test'.red);

              case 4:
              case 'end':
                return context$2$0.stop();
            }
          }, null, this);
        };

        context$1$0.next = 3;
        return _regeneratorRuntime.awrap(pem.createPrivateKeyAsync());

      case 3:
        key = context$1$0.sent;
        context$1$0.next = 6;
        return _regeneratorRuntime.awrap(pem.createCertificateAsync({ days: 1, selfSigned: true, serviceKey: key.key }));

      case 6:
        keys = context$1$0.sent;
        server = _https2['default'].createServer({ key: keys.serviceKey, cert: keys.certificate }, function (req, res) {
          res.end('If you are seeing this the certificate has been installed');
        }).listen(9758);

        console.log('Make sure you have at least one IOS Simulator running'.yellow);
        context$1$0.next = 11;
        return _regeneratorRuntime.awrap((0, _nodeSimctl.getDevices)());

      case 11:
        devices = context$1$0.sent;
        bootedDevices = [];

        for (osName in devices) {
          os = devices[osName];

          for (_deviceName in os) {
            device = os[_deviceName];

            if (device.state === 'Booted') {
              bootedDevices.push(device);
            }
          }
        }

        if (!(bootedDevices.length === 0)) {
          context$1$0.next = 16;
          break;
        }

        return context$1$0.abrupt('return', console.log('You must have at least one IOS Simulator running to do this test'.red));

      case 16:
        bootedDevice = bootedDevices[0];
        udid = bootedDevice.udid;
        deviceName = bootedDevice.name;

        console.log('HTTPS server is running at localhost:9758 and has created a new certificate at "random-pem.pem"'.yellow);
        console.log(('Navigate to https://localhost:9758 in \'' + deviceName + ' Simulator\'').yellow);
        console.log('DO NOT PUSH THE CONTINUE BUTTON. PUSH CANCEL.'.red);

        // Call this if the user answers 'No' to any prompts
        context$1$0.next = 24;
        return _regeneratorRuntime.awrap(_inquirer2['default'].prompt([{
          type: 'confirm',
          name: 'confirmOpenSite',
          message: 'Is https//localhost:9758 on \'' + deviceName + ' Simulator\' unaccessible?'
        }]));

      case 24:
        result = context$1$0.sent;

        console.log('Certificate', keys.certificate, udid);

        context$1$0.next = 28;
        return _regeneratorRuntime.awrap((0, _libUtils.installSSLCert)(keys.certificate, udid));

      case 28:
        if (result.confirmOpenSite) {
          context$1$0.next = 30;
          break;
        }

        return context$1$0.abrupt('return', done());

      case 30:

        // Apply certificate to Simulator
        console.log('Installing certificate'.yellow);
        console.log(('Certificate installed to \'' + deviceName + ' ' + udid + '\'. Navigate back to https://localhost:9758.').yellow);

        context$1$0.next = 34;
        return _regeneratorRuntime.awrap(_inquirer2['default'].prompt([{
          type: 'confirm',
          name: 'confirmOpenedSite',
          message: 'Now is https://localhost:9758 accessible?'
        }]));

      case 34:
        result = context$1$0.sent;

        if (result.confirmOpenedSite) {
          context$1$0.next = 37;
          break;
        }

        return context$1$0.abrupt('return', done());

      case 37:

        // Uninstall cert
        console.log('Uninstalling SSL cert'.yellow);
        context$1$0.next = 40;
        return _regeneratorRuntime.awrap((0, _libUtils.uninstallSSLCert)(keys.certificate, udid));

      case 40:
        console.log('SSL cert removed.'.yellow);
        console.log('Close the simulator, re-open it and then navigate back to https://localhost:9758'.yellow);

        context$1$0.next = 44;
        return _regeneratorRuntime.awrap(_inquirer2['default'].prompt([{
          type: 'confirm',
          name: 'confirmUninstallCert',
          message: 'Is https://localhost:9758 unaccessible?'
        }]));

      case 44:
        result = context$1$0.sent;

        if (result.confirmUninstallCert) {
          console.log('Test passed'.green);
        }

        return context$1$0.abrupt('return', server.close());

      case 47:
      case 'end':
        return context$1$0.stop();
    }
  }, null, _this);
})();

/* eslint-enable */

// Create an HTTPS server with a randomly generated certificate

// Get currently booted devices

// Get info for first device
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYXNzZXRzL2NlcnRpZmljYXRlLXRlc3Qtc2VydmVyL3NlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7cUJBQ2tCLE9BQU87Ozs7d0JBQ0osVUFBVTs7Ozt3QkFFa0Isb0JBQW9COzswQkFDMUMsYUFBYTs7d0JBQzFCLFVBQVU7Ozs7OztzQkFHTCxRQUFROzs7Ozs7QUFHM0IsSUFBTSxHQUFHLEdBQUcsc0JBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOztBQUUzQyxDQUFDO01BR0ssR0FBRyxFQUNILElBQUksRUFFSixNQUFNLEVBS04sT0FBTyxFQUdQLGFBQWEsRUFDUixNQUFNLEVBQ1QsRUFBRSxFQUNHLFdBQVUsRUFDYixNQUFNLEVBWVYsWUFBWSxFQUNaLElBQUksRUFDSixVQUFVLEVBT0MsSUFBSSxFQU1mLE1BQU07Ozs7O0FBTkssWUFBSSxZQUFKLElBQUk7Ozs7O2lEQUNYLGdDQUFpQixJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQzs7O0FBQzlDLHNCQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDZix1QkFBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7Ozs7Ozt5Q0F2QzVCLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRTs7O0FBQXZDLFdBQUc7O3lDQUNVLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFDLElBQUksRUFBQyxDQUFDLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBQyxDQUFDOzs7QUFBeEYsWUFBSTtBQUVKLGNBQU0sR0FBRyxtQkFBTSxZQUFZLENBQUMsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBQyxFQUFFLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRTtBQUNsRyxhQUFHLENBQUMsR0FBRyxDQUFDLDJE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c3QvYXNzZXRzL2NlcnRpZmljYXRlLXRlc3Qtc2VydmVyL3NlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbmltcG9ydCBodHRwcyBmcm9tICdodHRwcyc7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSAnaW5xdWlyZXInO1xuXG5pbXBvcnQgeyBpbnN0YWxsU1NMQ2VydCwgdW5pbnN0YWxsU1NMQ2VydCB9IGZyb20gJy4uLy4uLy4uL2xpYi91dGlscyc7XG5pbXBvcnQgeyBnZXREZXZpY2VzIH0gZnJvbSAnbm9kZS1zaW1jdGwnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgY29sb3JzIGZyb20gJ2NvbG9ycyc7XG4vKiBlc2xpbnQtZW5hYmxlICovIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbmNvbnN0IHBlbSA9IEIucHJvbWlzaWZ5QWxsKHJlcXVpcmUoJ3BlbScpKTtcblxuKGFzeW5jICgpID0+IHtcblxuICAvLyBDcmVhdGUgYW4gSFRUUFMgc2VydmVyIHdpdGggYSByYW5kb21seSBnZW5lcmF0ZWQgY2VydGlmaWNhdGVcbiAgbGV0IGtleSA9IGF3YWl0IHBlbS5jcmVhdGVQcml2YXRlS2V5QXN5bmMoKTtcbiAgbGV0IGtleXMgPSBhd2FpdCBwZW0uY3JlYXRlQ2VydGlmaWNhdGVBc3luYyh7ZGF5czoxLCBzZWxmU2lnbmVkOiB0cnVlLCBzZXJ2aWNlS2V5OiBrZXkua2V5fSk7XG5cbiAgbGV0IHNlcnZlciA9IGh0dHBzLmNyZWF0ZVNlcnZlcih7a2V5OiBrZXlzLnNlcnZpY2VLZXksIGNlcnQ6IGtleXMuY2VydGlmaWNhdGV9LCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICByZXMuZW5kKCdJZiB5b3UgYXJlIHNlZWluZyB0aGlzIHRoZSBjZXJ0aWZpY2F0ZSBoYXMgYmVlbiBpbnN0YWxsZWQnKTtcbiAgfSkubGlzdGVuKDk3NTgpO1xuXG4gIGNvbnNvbGUubG9nKCdNYWtlIHN1cmUgeW91IGhhdmUgYXQgbGVhc3Qgb25lIElPUyBTaW11bGF0b3IgcnVubmluZycueWVsbG93KTtcbiAgbGV0IGRldmljZXMgPSBhd2FpdCBnZXREZXZpY2VzKCk7XG5cbiAgLy8gR2V0IGN1cnJlbnRseSBib290ZWQgZGV2aWNlc1xuICBsZXQgYm9vdGVkRGV2aWNlcyA9IFtdO1xuICBmb3IgKGxldCBvc05hbWUgaW4gZGV2aWNlcykge1xuICAgIGxldCBvcyA9IGRldmljZXNbb3NOYW1lXTtcbiAgICBmb3IgKGxldCBkZXZpY2VOYW1lIGluIG9zKSB7XG4gICAgICBsZXQgZGV2aWNlID0gb3NbZGV2aWNlTmFtZV07XG4gICAgICBpZiAoZGV2aWNlLnN0YXRlID09PSAnQm9vdGVkJykge1xuICAgICAgICBib290ZWREZXZpY2VzLnB1c2goZGV2aWNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYm9vdGVkRGV2aWNlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY29uc29sZS5sb2coJ1lvdSBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIElPUyBTaW11bGF0b3IgcnVubmluZyB0byBkbyB0aGlzIHRlc3QnLnJlZCk7XG4gIH1cblxuICAvLyBHZXQgaW5mbyBmb3IgZmlyc3QgZGV2aWNlXG4gIGxldCBib290ZWREZXZpY2UgPSBib290ZWREZXZpY2VzWzBdO1xuICBsZXQgdWRpZCA9IGJvb3RlZERldmljZS51ZGlkO1xuICBsZXQgZGV2aWNlTmFtZSA9IGJvb3RlZERldmljZS5uYW1lO1xuXG4gIGNvbnNvbGUubG9nKCdIVFRQUyBzZXJ2ZXIgaXMgcnVubmluZyBhdCBsb2NhbGhvc3Q6OTc1OCBhbmQgaGFzIGNyZWF0ZWQgYSBuZXcgY2VydGlmaWNhdGUgYXQgXCJyYW5kb20tcGVtLnBlbVwiJy55ZWxsb3cpOyAgXG4gIGNvbnNvbGUubG9nKGBOYXZpZ2F0ZSB0byBodHRwczovL2xvY2FsaG9zdDo5NzU4IGluICcke2RldmljZU5hbWV9IFNpbXVsYXRvcidgLnllbGxvdyk7XG4gIGNvbnNvbGUubG9nKCdETyBOT1QgUFVTSCBUSEUgQ09OVElOVUUgQlVUVE9OLiBQVVNIIENBTkNFTC4nLnJlZCk7XG5cbiAgLy8gQ2FsbCB0aGlzIGlmIHRoZSB1c2VyIGFuc3dlcnMgJ05vJyB0byBhbnkgcHJvbXB0c1xuICBhc3luYyBmdW5jdGlvbiBkb25lICgpIHtcbiAgICBhd2FpdCB1bmluc3RhbGxTU0xDZXJ0KGtleXMuY2VydGlmaWNhdGUsIHVkaWQpO1xuICAgIHNlcnZlci5jbG9zZSgpO1xuICAgIGNvbnNvbGUubG9nKCdJbmNvbXBsZXRlL2ZhaWxlZCB0ZXN0Jy5yZWQpO1xuICB9XG5cbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGlucXVpcmVyLnByb21wdChbe1xuICAgIHR5cGU6ICdjb25maXJtJyxcbiAgICBuYW1lOiAnY29uZmlybU9wZW5TaXRlJyxcbiAgICBtZXNzYWdlOiBgSXMgaHR0cHMvL2xvY2FsaG9zdDo5NzU4IG9uICcke2RldmljZU5hbWV9IFNpbXVsYXRvcicgdW5hY2Nlc3NpYmxlP2AsXG4gIH1dKTtcblxuICBjb25zb2xlLmxvZygnQ2VydGlmaWNhdGUnLCBrZXlzLmNlcnRpZmljYXRlLCB1ZGlkKTtcblxuICBhd2FpdCBpbnN0YWxsU1NMQ2VydChrZXlzLmNlcnRpZmljYXRlLCB1ZGlkKTtcblxuICBpZiAoIXJlc3VsdC5jb25maXJtT3BlblNpdGUpIHJldHVybiBkb25lKCk7XG5cbiAgLy8gQXBwbHkgY2VydGlmaWNhdGUgdG8gU2ltdWxhdG9yXG4gIGNvbnNvbGUubG9nKCdJbnN0YWxsaW5nIGNlcnRpZmljYXRlJy55ZWxsb3cpO1xuICBjb25zb2xlLmxvZyhgQ2VydGlmaWNhdGUgaW5zdGFsbGVkIHRvICcke2RldmljZU5hbWV9ICR7dWRpZH0nLiBOYXZpZ2F0ZSBiYWNrIHRvIGh0dHBzOi8vbG9jYWxob3N0Ojk3NTguYC55ZWxsb3cpO1xuXG4gIHJlc3VsdCA9IGF3YWl0IGlucXVpcmVyLnByb21wdChbe1xuICAgIHR5cGU6ICdjb25maXJtJyxcbiAgICBuYW1lOiAnY29uZmlybU9wZW5lZFNpdGUnLFxuICAgIG1lc3NhZ2U6ICdOb3cgaXMgaHR0cHM6Ly9sb2NhbGhvc3Q6OTc1OCBhY2Nlc3NpYmxlPycsXG4gIH1dKTtcblxuICBpZiAoIXJlc3VsdC5jb25maXJtT3BlbmVkU2l0ZSkge1xuICAgIHJldHVybiBkb25lKCk7XG4gIH1cblxuICAvLyBVbmluc3RhbGwgY2VydFxuICBjb25zb2xlLmxvZyhgVW5pbnN0YWxsaW5nIFNTTCBjZXJ0YC55ZWxsb3cpO1xuICBhd2FpdCB1bmluc3RhbGxTU0xDZXJ0KGtleXMuY2VydGlmaWNhdGUsIHVkaWQpO1xuICBjb25zb2xlLmxvZyhgU1NMIGNlcnQgcmVtb3ZlZC5gLnllbGxvdyk7XG4gIGNvbnNvbGUubG9nKGBDbG9zZSB0aGUgc2ltdWxhdG9yLCByZS1vcGVuIGl0IGFuZCB0aGVuIG5hdmlnYXRlIGJhY2sgdG8gaHR0cHM6Ly9sb2NhbGhvc3Q6OTc1OGAueWVsbG93KTtcblxuICByZXN1bHQgPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQoW3tcbiAgICB0eXBlOiAnY29uZmlybScsXG4gICAgbmFtZTogJ2NvbmZpcm1Vbmluc3RhbGxDZXJ0JyxcbiAgICBtZXNzYWdlOiBgSXMgaHR0cHM6Ly9sb2NhbGhvc3Q6OTc1OCB1bmFjY2Vzc2libGU/YCxcbiAgfV0pO1xuXG4gIGlmIChyZXN1bHQuY29uZmlybVVuaW5zdGFsbENlcnQpIHtcbiAgICBjb25zb2xlLmxvZygnVGVzdCBwYXNzZWQnLmdyZWVuKTtcbiAgfVxuXG4gIHJldHVybiBzZXJ2ZXIuY2xvc2UoKTtcbn0pKCk7XG5cbi8qIGVzbGludC1lbmFibGUgKi8iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
