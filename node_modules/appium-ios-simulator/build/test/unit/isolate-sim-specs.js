require('source-map-support').install();

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _this = this;

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _nodeSimctl = require('node-simctl');

var nodeSimctl = _interopRequireWildcard(_nodeSimctl);

var _assetsDeviceList = require('../assets/deviceList');

var _libExtensionsIsolateSimJs = require('../../lib/extensions/isolate-sim.js');

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('isolate sims', function () {
  var getDevicesStub = undefined;

  beforeEach(function () {
    getDevicesStub = _sinon2['default'].stub(nodeSimctl, 'getDevices');
    getDevicesStub.returns(_bluebird2['default'].resolve(_assetsDeviceList.devices));
  });
  afterEach(function () {
    nodeSimctl.getDevices.restore();
  });

  it('getAllUdids', function callee$1$0() {
    var udids, udid;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap((0, _libExtensionsIsolateSimJs.getAllUdids)());

        case 2:
          udids = context$2$0.sent;

          for (udid in udids) {
            udid.should.be.a('string');
          }
          udids.length.should.equal(26);

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9pc29sYXRlLXNpbS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7b0JBRWlCLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O3FCQUMzQixPQUFPOzs7OzBCQUNHLGFBQWE7O0lBQTdCLFVBQVU7O2dDQUNFLHNCQUFzQjs7eUNBQ2xCLHFDQUFxQzs7d0JBQzdDLFVBQVU7Ozs7QUFHOUIsa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUd6QixRQUFRLENBQUMsY0FBYyxFQUFFLFlBQU07QUFDN0IsTUFBSSxjQUFjLFlBQUEsQ0FBQzs7QUFFbkIsWUFBVSxDQUFDLFlBQU07QUFDZixrQkFBYyxHQUFHLG1CQUFNLElBQUksQ0FBQyxVQUFVLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDdEQsa0JBQWMsQ0FBQyxPQUFPLENBQUMsc0JBQVEsT0FBTywyQkFBUyxDQUFDLENBQUM7R0FDbEQsQ0FBQyxDQUFDO0FBQ0gsV0FBUyxDQUFDLFlBQU07QUFDZCxjQUFVLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO0dBQ2pDLENBQUMsQ0FBQzs7QUFFSCxJQUFFLENBQUMsYUFBYSxFQUFFO1FBQ1osS0FBSyxFQUNBLElBQUk7Ozs7OzJDQURLLDZDQUFhOzs7QUFBM0IsZUFBSzs7QUFDVCxlQUFTLElBQUksSUFBSSxLQUFLLEVBQUU7QUFDdEIsZ0JBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztXQUM1QjtBQUNELGVBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQzs7Ozs7OztHQUMvQixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L2lzb2xhdGUtc2ltLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhbnNwaWxlOm1vY2hhXG5cbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCAqIGFzIG5vZGVTaW1jdGwgZnJvbSAnbm9kZS1zaW1jdGwnO1xuaW1wb3J0IHsgZGV2aWNlcyB9IGZyb20gJy4uL2Fzc2V0cy9kZXZpY2VMaXN0JztcbmltcG9ydCB7IGdldEFsbFVkaWRzIH0gZnJvbSAnLi4vLi4vbGliL2V4dGVuc2lvbnMvaXNvbGF0ZS1zaW0uanMnO1xuaW1wb3J0IFByb21pc2UgZnJvbSAnYmx1ZWJpcmQnO1xuXG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cblxuZGVzY3JpYmUoJ2lzb2xhdGUgc2ltcycsICgpID0+IHtcbiAgbGV0IGdldERldmljZXNTdHViO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGdldERldmljZXNTdHViID0gc2lub24uc3R1Yihub2RlU2ltY3RsLCAnZ2V0RGV2aWNlcycpO1xuICAgIGdldERldmljZXNTdHViLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKGRldmljZXMpKTtcbiAgfSk7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgbm9kZVNpbWN0bC5nZXREZXZpY2VzLnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2dldEFsbFVkaWRzJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCB1ZGlkcyA9IGF3YWl0IGdldEFsbFVkaWRzKCk7XG4gICAgZm9yIChsZXQgdWRpZCBpbiB1ZGlkcykge1xuICAgICAgdWRpZC5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgfVxuICAgIHVkaWRzLmxlbmd0aC5zaG91bGQuZXF1YWwoMjYpO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
